链接：https://mp.weixin.qq.com/s/VQzmg31MkZbUJVnNfqXKkQ

# 缓存
> 多级缓存提升服务性能
## Redis
优点：不同机器读取时，数据一致
缺点：增加一次 I/O
### 常见问题
- 缓存雪崩

    描述：缓存中大量数据同时失效
    解决方案：数据设置的过期时间随机化，固定过期时间+随机值
- 缓存穿透

    描述：读取下游不存在的数据，缓存始终无法命中
    
    解决方案

    方法一：使用布隆过滤器对不存在的数据进行过滤        
    方法二：缓存中设置空值

- 缓存击穿

    描述：缓存中某个热点数据失效
    
    解决方案
    
    方法一：热点数据设置较长的过期时间
    
    方法二：用 Go 的 Singlefight，保证同一个时刻只有一个请求会到下游
- 热点 Key

    描述：频繁访问 Key，导致该 Key 的分片或 Redis 访问量过高 
    
    解决方案
    
    方法一：将 Key 缓存到机器内存中
    
    方法二：将热点 Key 分散存储到多个 Key 上，不同 Key 存储相同的值